<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Qué Aura necesitas hoy?</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración de Tailwind para usar el color de la marca y la fuente Inter -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'aura-green': '#72c3b4', 
                        'aura-bg': '#f3f4f6', // Un gris muy claro para el fondo
                        'aura-dark': '#1f2937', // Gris oscuro para el texto
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
    </style>
</head>
<body class="bg-aura-bg min-h-screen flex items-center justify-center p-4 font-sans text-base">

    <!-- Contenedor Principal del Quiz - Aumentado a max-w-lg -->
    <div id="quiz-container" class="w-full max-w-lg bg-white p-8 rounded-3xl shadow-2xl transition-all duration-500">
        
        <header class="text-center mb-6">
            <img src="logo-aura.png" 
                 alt="Logo de Aura" 
                 class="mx-auto h-24 mb-2" 
                 onerror="this.style.display='none'">
            <h2 id="subtitle" class="text-xl font-semibold text-aura-green">Encontrá tu Aura ideal</h2>
        </header>

        <!-- PANTALLA DE BIENVENIDA (Nueva Portada) -->
        <div id="welcome-screen" class="text-center">
            <p class="text-gray-700 mb-6 text-lg">
                Respondé 3 preguntas rápidas para descubrir cuál de nuestras bebidas adaptógenas es perfecta para equilibrar tu día.
            </p>
            <p class="text-sm font-semibold text-gray-500 mb-8">
                ¡El test dura menos de 15 segundos!
            </p>
            <button onclick="startQuiz()" class="w-full py-3 bg-aura-green text-aura-dark font-bold text-lg rounded-xl hover:bg-green-500 transition duration-200 shadow-md">
                Comenzar Test
            </button>
        </div>


        <!-- Pantalla de Preguntas (oculta inicialmente) -->
        <div id="question-screen" class="hidden">
            <div class="mb-4">
                <p id="question-text" class="text-lg font-semibold text-aura-dark mb-4"></p>
            </div>
            <div id="options-container" class="space-y-3">
                <!-- Opciones se inyectan con JS -->
            </div>
            <div class="mt-6 text-center">
                <span id="progress-text" class="text-sm text-gray-500"></span>
            </div>
        </div>

        <!-- Pantalla de Resultados (oculta inicialmente) -->
        <div id="result-screen" class="hidden text-center">
            <h3 class="text-2xl font-bold text-aura-dark mb-4">Tu Aura recomendada es:</h3>
            <div class="bg-aura-green/20 p-6 rounded-2xl mb-6">
                <p class="text-sm font-semibold text-aura-dark uppercase">Bebida Aura</p>
                <h4 id="recommended-drink-name" class="text-3xl font-extrabold text-aura-dark my-2"></h4>
            </div>
            
            <p id="recommended-drink-description" class="text-gray-700 mb-6"></p>
            
            <p id="result-cta-text" class="text-center text-gray-700 font-semibold mb-6">
                ¡Plantá tu tarjeta con esta manifestación!
            </p>
            
            <button onclick="resetQuiz()" class="w-full py-3 bg-aura-dark text-white font-bold text-lg rounded-xl hover:bg-gray-700 transition duration-200">
                Volver a hacer el test
            </button>
        </div>
    </div>

    <script>
        // Definición de las 3 bebidas Aura
        const drinks = {
            focus: {
                name: "Aura Focus (Melena de León)",
                description: "Necesitas claridad mental y concentración. El melena de león apoya la función cerebral para que te mantengas productivo y sin distracciones.",
            },
            power: { 
                name: "Aura Power (Cordyceps)",
                description: "Tu cuerpo necesita un impulso de energía sostenida. El Cordyceps junto con remolacha, curcumina y Maca te da energía sin los picos ni caídas del café.",
            },
            zen: { 
                name: "Aura Zen (Reishi)",
                description: "Es hora de bajar las revoluciones y encontrar paz. El Reishi es ideal para combatir el estrés y preparar tu mente para un descanso profundo.",
            }
        };

        // Estado inicial del quiz - Usando las claves de marca
        let currentQuestionIndex = 0;
        let scores = { focus: 0, power: 0, zen: 0 }; 
        // Definición de las preguntas (cada respuesta suma puntos a una categoría)
        const questions = [
            {
                text: "¿Cuál es tu mayor desafío en este momento?",
                options: [
                    { text: "Me cuesta mucho concentrarme en mis tareas.", score: { focus: 3 } },
                    { text: "Me siento agotado/a y con poca motivación para empezar.", score: { power: 3 } }, 
                    { text: "Estoy muy estresado/a y me cuesta relajarme.", score: { zen: 3 } } 
                ]
            },
            {
                text: "¿En qué momento del día sientes el mayor 'bajón'?",
                options: [
                    { text: "A media tarde, cuando necesito un extra para seguir.", score: { focus: 2 } },
                    { text: "Por la mañana, siento que no me levanto.", score: { power: 2 } }, 
                    { text: "Por la noche, mi mente no se desconecta.", score: { zen: 2 } } 
                ]
            },
            {
                text: "¿Qué resultado buscas más de una bebida natural?",
                options: [
                    { text: "Una mente clara y enfocada.", score: { focus: 1 } },
                    { text: "Sentirme más activo/a físicamente.", score: { power: 1 } }, 
                    { text: "Una sensación general de paz y bienestar.", score: { zen: 1 } } 
                ]
            }
        ];
        
        /**
         * Función que se llama al presionar "Comenzar Test Aura" o "Volver a Empezar".
         * Se encarga de limpiar el estado y empezar el quiz.
         */
        function startQuiz() {
            // FIX CRUCIAL DE ESTADO: Se asegura que el índice de pregunta se restablece.
            currentQuestionIndex = 0;
            
            // RESTABLECER SCORES: Limpiamos los puntajes de la ejecución anterior a cero.
            scores.focus = 0;
            scores.power = 0;
            scores.zen = 0;
            
            // Ocultar todas las pantallas y mostrar solo la de preguntas
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('question-screen').classList.remove('hidden');
            
            // Llama a loadQuestion con índice 0 para cargar la primera pregunta
            loadQuestion(0);
        }

        // La función resetQuiz() ahora solo llama a startQuiz() para limpiar el estado y volver a la pregunta 1
        function resetQuiz() {
            startQuiz();
        }

        /**
         * Carga la pregunta actual en la pantalla.
         * @param {number} index - Índice de la pregunta a cargar.
         */
        function loadQuestion(index) {
            
            if (index >= questions.length) {
                showResult();
                return;
            }

            const question = questions[index];
            document.getElementById('question-text').textContent = question.text;
            document.getElementById('progress-text').textContent = `Pregunta ${index + 1} de ${questions.length}`;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, optionIndex) => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.className = "w-full text-left p-4 bg-aura-bg border border-gray-300 rounded-xl hover:bg-aura-green hover:border-aura-green transition duration-150 text-gray-700 font-medium shadow-sm text-lg";
                button.onclick = () => selectAnswer(option.score);
                optionsContainer.appendChild(button);
            });
        }

        /**
         * Registra la respuesta y avanza a la siguiente pregunta.
         * @param {object} scoreChanges - Objeto con los puntos a sumar a cada categoría.
         */
        function selectAnswer(scoreChanges) {
            // Sumar los puntos al total
            for (const key in scoreChanges) {
                scores[key] += scoreChanges[key];
            }

            // Mover a la siguiente pregunta
            currentQuestionIndex++;
            loadQuestion(currentQuestionIndex);
        }

        /**
         * Calcula el resultado final y lo muestra en pantalla.
         */
        function showResult() {
            // Ocultar pantalla de preguntas
            document.getElementById('question-screen').classList.add('hidden');
            // Mostrar pantalla de resultados
            document.getElementById('result-screen').classList.remove('hidden');

            // Encontrar la categoría con el puntaje más alto
            let maxScore = -1;
            let recommendedKey = '';

            for (const key in scores) {
                if (scores[key] > maxScore) {
                    maxScore = scores[key];
                    recommendedKey = key;
                }
            }

            const recommendedDrink = drinks[recommendedKey];
            
            console.log("Recomendación:", recommendedDrink.name);


            // Inyectar el resultado en el HTML
            document.getElementById('recommended-drink-name').textContent = recommendedDrink.name;
            document.getElementById('recommended-drink-description').textContent = recommendedDrink.description;

            // Se eliminó la lógica del botón de compra para esta versión del quiz.

        }

        // INICIO DEL QUIZ AL CARGAR LA PÁGINA (Arranque en la pantalla de bienvenida)
        document.addEventListener('DOMContentLoaded', () => {
             // Ocultar la pantalla de preguntas al cargar para que solo se vea la de bienvenida
             document.getElementById('question-screen').classList.add('hidden');
             // Aseguramos que la pantalla de bienvenida esté visible
             document.getElementById('welcome-screen').classList.remove('hidden');
        });
    </script>
</body>
</html>



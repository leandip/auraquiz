<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Qué Aura necesitas hoy?</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración de Tailwind para usar el color de la marca y la fuente Inter -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'aura-green': '#72c3b4', // Verde de marca
                        'aura-bg': '#f3f4f6', // Un gris muy claro para el fondo
                        'aura-dark': '#1f2937', // Gris oscuro para el texto
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
    </style>
</head>
<body class="bg-aura-bg min-h-screen flex items-center justify-center p-4 font-sans">

    <!-- Contenedor Principal del Quiz -->
    <div id="quiz-container" class="w-full max-w-lg bg-white p-8 rounded-3xl shadow-2xl transition-all duration-500">
        
        <header class="text-center mb-6">
    <img src="logo-aura.png" 
         alt="Logo de Aura" 
         class="mx-auto h-20 mb-2" 
         onerror="this.style.display='none'">
    <h2 id="subtitle" class="text-xl font-semibold text-aura-green">Encontrá tu Aura ideal</h2>
</header>

        <!-- Pantalla de Bienvenida e Inicio -->
        <div id="welcome-screen">
            <p class="text-center text-gray-600 mb-8">Respondé 3 preguntas simples para descubrir cuál de nuestras bebidas es la que necesitás para tu estado de ánimo y tus objetivos.</p>
            <button onclick="startQuiz()" class="w-full py-3 bg-aura-green text-aura-dark font-bold text-lg rounded-xl hover:bg-green-500 transition duration-200 shadow-md">
                Comenzar Test
            </button>
        </div>

        <!-- Pantalla de Preguntas (oculta inicialmente) -->
        <div id="question-screen" class="hidden">
            <div class="mb-4">
                <p id="question-text" class="text-lg font-semibold text-aura-dark mb-4"></p>
            </div>
            <div id="options-container" class="space-y-3">
                <!-- Opciones se inyectan con JS -->
            </div>
            <div class="mt-6 text-center">
                <span id="progress-text" class="text-sm text-gray-500"></span>
            </div>
        </div>

        <!-- Pantalla de Resultados (oculta inicialmente) -->
        <div id="result-screen" class="hidden text-center">
            <h3 class="text-2xl font-bold text-aura-dark mb-4">Te recomendamos beber:</h3>
            <div class="bg-aura-green/20 p-6 rounded-2xl mb-6">
                <p class="text-sm font-semibold text-aura-dark uppercase">Bebida Aura</p>
                <h4 id="recommended-drink-name" class="text-3xl font-extrabold text-aura-dark my-2"></h4>
            </div>
            
            <p id="recommended-drink-description" class="text-gray-700 mb-6"></p>
            
            <p class="text-sm text-gray-500 mb-4">¡Plantá tu tarjeta con esta manifestación!</p>

            <button onclick="resetQuiz()" class="w-full py-3 bg-aura-dark text-white font-bold text-lg rounded-xl hover:bg-gray-700 transition duration-200">
                Volver a Empezar
            </button>
        </div>
    </div>

    <script>
        // Definición de las 3 bebidas Aura
        const drinks = {
            Focus: {
                name: "Aura Focus (Melena de León)",
                description: "Necesitas claridad mental y concentración. El melena de león apoya la función cerebral para que te mantengas productivo y sin distracciones.",
            },
            Power: {
                name: "Aura Power (Cordyceps)",
                description: "Tu cuerpo necesita un impulso de energía sostenida. El Cordyceps junto con remolacha, curcumina y Maca te da energía sin los picos ni caídas del café",
            },
            Zen: {
                name: "Aura Zen (Reishi)",
                description: "Es hora de bajar las revoluciones y encontrar paz. El Reishi es ideal para combatir el estrés y preparar tu mente para un descanso profundo.",
            }
        };

        // Estado inicial del quiz
        let currentQuestionIndex = 0;
        let scores = { Focus: 0, Power: 0, Zen: 0 };

        // Definición de las preguntas (cada respuesta suma puntos a una categoría)
        const questions = [
            {
                text: "¿Cuál es tu mayor desafío en este momento?",
                options: [
                    { text: "Me cuesta mucho concentrarme en mis tareas.", score: { Focus: 3 } },
                    { text: "Me siento agotado/a y con poca motivación para empezar.", score: { Power: 3 } },
                    { text: "Estoy muy estresado/a y me cuesta relajarme.", score: { Zen: 3 } }
                ]
            },
            {
                text: "¿En qué momento del día sientes el mayor 'bajón'?",
                options: [
                    { text: "A media tarde, cuando necesito un extra para seguir.", score: { Focus: 2 } },
                    { text: "Por la mañana, siento que no me levanto.", score: { Power: 2 } },
                    { text: "Por la noche, mi mente no se desconecta.", score: { Zen: 2 } }
                ]
            },
            {
                text: "¿Qué resultado buscas más de una bebida natural?",
                options: [
                    { text: "Una mente clara y enfocada.", score: { Focus: 1 } },
                    { text: "Sentirme más activo/a físicamente.", score: { Power: 1 } },
                    { text: "Una sensación general de paz y bienestar.", score: { Zen: 1 } }
                ]
            }
        ];

        /**
         * Inicializa y muestra la pantalla de bienvenida.
         */
        function startQuiz() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('question-screen').classList.remove('hidden');
            loadQuestion(currentQuestionIndex);
        }

        /**
         * Carga la pregunta actual en la pantalla.
         * @param {number} index - Índice de la pregunta a cargar.
         */
        function loadQuestion(index) {
            if (index >= questions.length) {
                showResult();
                return;
            }

            const question = questions[index];
            document.getElementById('question-text').textContent = question.text;
            document.getElementById('progress-text').textContent = `Pregunta ${index + 1} de ${questions.length}`;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, optionIndex) => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.className = "w-full text-left p-4 bg-aura-bg border border-gray-300 rounded-xl hover:bg-aura-green hover:border-aura-green transition duration-150 text-gray-700 font-medium shadow-sm";
                button.onclick = () => selectAnswer(option.score);
                optionsContainer.appendChild(button);
            });
        }

        /**
         * Registra la respuesta y avanza a la siguiente pregunta.
         * @param {object} scoreChanges - Objeto con los puntos a sumar a cada categoría.
         */
        function selectAnswer(scoreChanges) {
            // Sumar los puntos al total
            for (const key in scoreChanges) {
                scores[key] += scoreChanges[key];
            }

            // Mover a la siguiente pregunta
            currentQuestionIndex++;
            loadQuestion(currentQuestionIndex);
        }

        /**
         * Calcula el resultado final y lo muestra en pantalla.
         */
        function showResult() {
            // Ocultar pantalla de preguntas
            document.getElementById('question-screen').classList.add('hidden');
            // Mostrar pantalla de resultados
            document.getElementById('result-screen').classList.remove('hidden');

            // Encontrar la categoría con el puntaje más alto
            let maxScore = -1;
            let recommendedKey = '';

            for (const key in scores) {
                if (scores[key] > maxScore) {
                    maxScore = scores[key];
                    recommendedKey = key;
                }
            }

            const recommendedDrink = drinks[recommendedKey];

            // Inyectar el resultado en el HTML
            document.getElementById('recommended-drink-name').textContent = recommendedDrink.name;
            document.getElementById('recommended-drink-description').textContent = recommendedDrink.description;
        }

        /**
         * Reinicia el estado del quiz.
         */
        function resetQuiz() {
            // FIX CRUCIAL: Reseteamos explícitamente las variables de estado global aquí, 
            // asegurando que el índice de pregunta y los scores sean cero.
            currentQuestionIndex = 0;
            scores = { focus: 0, energy: 0, calm: 0 };
            
            // Volver a la pantalla de preguntas y empezar
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('question-screen').classList.remove('hidden');
            
            // Llama a loadQuestion con índice 0
            loadQuestion(0); 
        }

        // INICIO DEL QUIZ AL CARGAR LA PÁGINA (Arranque instantáneo para la feria)
        // FIX FINAL: Envolvemos la carga inicial en un listener para asegurar que el DOM 
        // y el script están completamente listos y evitar problemas de estado persistente.
        document.addEventListener('DOMContentLoaded', () => {
            loadQuestion(0);
        });
    </script>
</body>
</html>









